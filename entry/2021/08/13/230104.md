---
title: プログラムはたまたま動いているに過ぎないと思った
date: 2021-08-13T14:01:04.000Z
id: "26006613794870154"
draft: true
---
卒業研究のテーマを考えていた当時、「N+1問題」みたいな名前のついたものを研究の課題にするのが手っ取り早いと思っていたので、ほぼ語感だけで「後方互換性」をテーマに決めた。
そんなこんなでここ数ヶ月はライブラリのアップデートがプログラムを壊すことについて考えていた。

<!-- more -->

### ライブラリの後方互換性
後方互換性とは、文字通り時間的な後方に対してプログラムなどが交換可能であるかを指す言葉で、ライブラリの文脈では、ライブラリをアップデートして以降もそれを使うプログラムが変わらず動作し続けるかの話である。

今時のプログラム開発は何かしらのライブラリを使って行われる。
その依存ライブラリのバージョンをアップデートすると、アップデート後のライブラリの仕様変更と自分のプログラムが噛み合っていないことで、我々ライブラリユーザーのプログラムはしばしばエラーになったり動作が変わったりする。

このような破壊を伴う変更を「破壊的変更(Breaking Change)」とか言う。
ちなみに「破壊的」とは動作の変化を引き起こすことを「破壊」と表現しているだけで、影響の規模感とかは一切関係ないと思われれる。

### 破壊的変更への対策
このような問題に対してはセマンティックバージョニング(SemVer)((https://semver.org))、つまりバージョン名の数字(1.0.0とか)で破壊的変更の有無をユーザーに伝達するというというかなり普及している対策がある(読んだ論文にも何度か出てきた)。
これはつまり、そのライブラリについてもっとも詳しいであろうライブラリ開発者に破壊的変更の有無を推測させ、ライブラリの利用者全員がそれを参考にバージョン更新をすべきかどうかを判断するというものである。

しかしSemVerには欠点がある。
結局のところ人間が判断を行うので様々な都合で誤ったバージョン名が命名されることがあり、誤ったバージョン名を参考にしたユーザーはプログラムが破壊される。
アップデートのタイミングなどでプログラムによって自動的に判断を行えればいいのだが、それはプログラムのエラーを事前に発見するようなものなので、多分正確な判断は不可能である。

### プログラムは(さまざまな努力の結果)たまたま動いている
ライブラリを使うということは、全体をよく知らない他人のプログラムを自分のプログラムに混入させるということである。
